execute("scoreboard objectives add sneak minecraft.custom:minecraft.sneak_time")


fun long_function() {
	i = 0
	while (getTickTime() < 1000) {
		++i
	}	
	#run for @a print("Executed {} iterations", i)
}

fun onTick() {
	stopTime = False
	run for @a {
		if (evaluate("scoreboard players get @s sneak")) {
			stopTime = True
			execute("scoreboard players set @s sneak 0")
		}
	}
	if (stopTime)
		long_function()
}
