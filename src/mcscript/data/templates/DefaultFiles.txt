[mcmeta]
{{
    "pack": {{
        "pack_format": 5,
        "description": "A datapack generated by mcscript."
    }}
}}

[tag_load]
{{
	"values": [
		"{name}:load"
	]
}}

[tag_tick]
{{
	"values": [
		"{name}:tick"
	]
}}

[load]
# 2**24-1, max tick length ~ 30s
gamerule maxCommandChainLength 16777215
scoreboard objectives remove mcscript
scoreboard objectives add mcscript dummy

data remove storage {name}:main state

scoreboard objectives setdisplay sidebar mcscript
tellraw @a ["", {{"text": "["}}, {{"text":"McScript", "color":"gold", "clickEvent":{{"action":"suggest_command", "value":"/function {name}:main"}}, "hoverEvent":{{"action":"show_text","value":"click to run"}}}}, {{"text":"] loaded"}}]

function {name}:main

[load_lite]
scoreboard objectives remove mcscript
scoreboard objectives add mcscript dummy

data remove storage {name}:main state

function {name}:main

[tag_block]
{{
    "replace": false,
    "values": [
        {}
    ]
}}

[predicate_weather_raining]
{
  "condition": "minecraft:weather_check",
  "raining": true
}

[predicate_weather_thundering]
{
  "condition": "minecraft:weather_check",
  "thundering": true
}

[predicate_light]
{{
  "condition": "minecraft:entity_properties",
  "entity": "this",
  "predicate": {{
    "location": {{
      "light": {{
        "light": {light}
      }}
    }}
  }}
}}

[predicate_biome]
{{
  "condition": "minecraft:entity_properties",
  "entity": "this",
  "predicate": {{
    "location": {{
      "biome": "{biome}"
    }}
  }}
}}

[predicate_feature]
{{
  "condition": "minecraft:entity_properties",
  "entity": "this",
  "predicate": {{
    "location": {{
      "feature": "{feature}"
    }}
  }}
}}